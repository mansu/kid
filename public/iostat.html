<html>
    <head>
    </head>
        <script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.13.custom.min.js"></script>
        <script type="text/javascript" src="js/jquery.corner.js"></script>
        <script type="text/javascript" src="js/kid.js"></script>
        <link rel="stylesheet" type="text/css" href="css/kid_basic.css"/>
        <link rel="stylesheet" type="text/css" href="css/tipTip.css"/>
        <script type="text/javascript" src="js/jquery.tipTip.minified.js"></script>
    <body>
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
        <div class=demo>
            <table  id="layoutTable">
                <td><tr id="level0"></tr></td>
                <td><tr id="level1"></tr></td>
                <td><tr id="level2"></tr></td>
                <td><tr id="level3"></tr></td>
                <td><tr id="level4"></tr></td>
                <td><tr id="level5"></tr></td>
                <td><tr id="level6"></tr></td>
                <td><tr id="level7"></tr></td>
                <td><tr id="level8"></tr></td>
                <td><tr id="level9"></tr></td>
                <td><tr id="level10"></tr></td>
                <td><tr id="level11"></tr></td>
                <td><tr id="level12"></tr></td>
                <td><tr id="level13"></tr></td>
                <td><tr id="level14"></tr></td>
                <td><tr id="level15"></tr></td>
                <td><tr id="level16"></tr></td>
                <td><tr id="level17"></tr></td>
                <td><tr id="level18"></tr></td>
                <td><tr id="level19"></tr></td>
                <td><tr id="level20"></tr></td>
            </table><div id=node0 class=hiddennode>

<p><span  title="Display a single history since boot report for all CPU and devices." class=nodelink data-rel="node1">iostat</span>  <span  title="Display extended statistics" class=nodeinfo >-x</span><br />
<span  title="Linux kernel vision and architecture" class=nodeinfo >Linux 2.6.35.11-83.9.amzn1.i686</span> <span  title="IP address of the host" class=nodeinfo >(ip-10-168-74-42)</span>   <span  title="time of the report" class=nodeinfo >09/07/2011</span> <span  title="CPU architecture" class=nodeinfo ><em>i686</em></span><span  title="Number of CPUs on this host" class=nodeinfo >(1 CPU)</span></p>

<table>
<thead>
<tr>
  <th>avg-cpu:</th>
  <th><span  title="% of CPU utilization that occurred while executing at the user level (application)." class=nodeinfo >%user</span></th>
  <th><span  title="% of CPU utilization that occurred while executing at the user level with nice priority." class=nodeinfo >%nice</span></th>
  <th><span  title="% of CPU utilization that occurred while executing at the system level (kernel)." class=nodeinfo >%system</span></th>
  <th><span  title="% of time that the CPU or CPUs were idle during which the system had an outstanding disk I/O request." class=nodeinfo >%iowait</span></th>
  <th><span  title="% of time spent in involuntary wait by the virtual CPU or CPUs while the hypervisor was servicing another virtual processor." class=nodelink data-rel="node3">%steal</span></th>
  <th><span  title="% of time that the CPU or CPUs were idle and the system did not have an outstanding disk I/O request." class=nodeinfo >%idle</span></th>
</tr>
</thead>
<tbody>
<tr>
  <td></td>
  <td>0.01</td>
  <td>0.00</td>
  <td>0.01</td>
  <td>0.00</td>
  <td>0.01</td>
  <td>99.97</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
  <th>Device:</th>
  <th><span  title="The number of read requests merged per second that were queued to the device." class=nodeinfo >rrqm/s</span></th>
  <th><span  title="The number of write requests merged per second that were queued to the device." class=nodeinfo >wrqm/s</span></th>
  <th><span  title="The number of read requests that were issued to the device per second." class=nodeinfo >r/s</span></th>
  <th><span  title="The number of write requests that were issued to the device per second." class=nodeinfo >w/s</span></th>
  <th><span  title="The number of sectors read from the device per second." class=nodeinfo >rsec/s</span></th>
  <th><span  title="The number of sectors written to the device per second." class=nodeinfo >wsec/s</span></th>
  <th><span  title="The average size (in sectors) of the requests that were issued to the device." class=nodeinfo >avgrq-sz</span></th>
  <th><span  title="The average queue length of the requests that were issued to the device." class=nodeinfo >avgqu-sz</span></th>
  <th><span  title="The average time (in milliseconds) for I/O requests issued to the device to be served. This includes the time spent by the requests in queue and the time  spent  servicing them." class=nodeinfo >await</span></th>
  <th><span  title="The average service time (in milliseconds) for I/O requests that were issued to the device." class=nodeinfo >svctm</span></th>
  <th><span  title="Percentage  of  CPU time during which I/O requests were issued to the device (bandwidth utilization for the device). Device saturation occurs when this value is close to 100%." class=nodeinfo >%util</span></th>
</tr>
</thead>
<tbody>
<tr>
  <td>xvdap1</td>
  <td>0.00</td>
  <td>0.02</td>
  <td>0.00</td>
  <td>0.01</td>
  <td>0.01</td>
  <td>0.21</td>
  <td>20.65</td>
  <td>0.00</td>
  <td>18.91</td>
  <td>1.57</td>
  <td>0.00</td>
</tr>
<tr>
  <td>xvdap3</td>
  <td>0.00</td>
  <td>0.00</td>
  <td>0.00</td>
  <td>0.00</td>
  <td>0.00</td>
  <td>0.00</td>
  <td>9.65</td>
  <td>0.00</td>
  <td>3.29</td>
  <td>3.06</td>
  <td>0.00</td>
</tr>
</tbody>
</table>

</div>

<div id=node1 data-title="iostat info" class=hiddennode>

<p>The iostat command is used for monitoring system input/output device loading by observing the time the devices are active in relation to their average transfer rates. The iostat command generates reports that can be used to change system configuration to better balance the input/output load between physical disks.</p>

<p>The first report generated by the iostat command provides statistics concerning the time since the system was booted. Each subsequent report covers the time since the previous report. All statistics are reported each time the iostat command is run. The report consists of a CPU header row followed by a row of CPU statistics. On multiprocessor systems, CPU statistics are calculated system-wide as averages among all processors. A device header row is displayed followed by a line of statistics for each device that is configured.</p>

<p><span  title="Where does iostat get it's info from?" class=nodelink data-rel="node2">Implementation</span></p>

</div>

<div id=node2 data-title="iostat implementation details" class=hiddennode>

<p>/proc/stat contains system statistics.<br />
/proc/uptime contains system uptime.<br />
/proc/partitions contains disk statistics (for pre 2.5 kernels that have been patched).<br />
/proc/diskstats contains disks statistics (for post 2.5 kernels).<br />
/sys contains statistics for block devices (post 2.5 kernels).<br />
/proc/self/mountstats contains statistics for network filesystems.</p>

</div>

<div id=node3 data-title="CPU stealing" class=hiddennode>

<p>Steal time is the percentage of time a virtual CPU waits for a real CPU while the hypervisor is servicing another virtual processor.</p>

<p>Steal time only makes sense in a virtualised environment. A high steal percentage may mean that you may be outgrowing your virtual machine with your hosting company. Also, a high steal percentage may mean that your hosting company is overselling virtual machines on your particular server. A low steal percentage can mean that your applications are working well with your current virtual machine.</p>

<p><strong>Articles</strong></p>

<ul>
<li><a href="http://public.dhe.ibm.com/software/dw/linux390/perf/CPU_time_accounting.pdf">CPU time accounting</a></li>
<li><a href="http://gregsramblings.com/2011/02/07/amazon-ec2-micro-instance-cpu-steal/">Demo of CPU stealing</a></li>
</ul>

</div>
        </div>
    </body>
</html>